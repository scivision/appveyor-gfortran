environment:
  PROFILE: MINGWx64
  PLATFORM: x64
  MINGW_DIR: C:\mingw-w64\x86_64-6.3.0-posix-seh-rt_v5-rev1\mingw64
#   MINGW_DIR: C:\mingw-w64\i686-5.3.0-posix-dwarf-rt_v4-rev0\mingw32

clone_depth: 3


before_build:
- set Path=%MINGW_DIR%\bin;%Path%
- gcc -dumpversion
- g++ -dumpversion
- gfortran -dumpversion
- mingw32-make --version
- cmake --version

- set ORIGPATH=%PATH%
- set CXX=%MINGW_DIR%\bin\g++.exe
- set FC=%MINGW_DIR%\bin\gfortran.exe


build_script:
- cd bin
- set Path=C:\Program Files (x86)\CMake\bin
- cmake .. -G "MinGW Makefiles"
- set Path=%OLDPATH% 
- ..\%MINGW_DIR%\bin\mingw32-make
  
after_build:
- hellocpp.exe
- hellof.exe

on_failure:
- type C:/projects/appveyor-gfortran/bin/CMakeFiles/CMakeError.log
